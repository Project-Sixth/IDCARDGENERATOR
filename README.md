# ID Card Generator
Представьте ситуацию - вам нужно в достаточно краткие сроки собрать штук 100+ каких-нибудь уникальных портретов/иных вещей, чтобы использовать их как подшивку под личные дела, может как идентификационные карты, или еще любым иным образом. У вас есть два варианта работы с этим делом. Первый - создавать каждую карту вручную. Переименовывать каждый текст вручную, постоянно обрезать и подгонять аватарки, искать нужные картинки и вспоминать таблицу цветов. Не шибко красиво. Поэтому я здесь, чтобы предложить второй вариант - шаблоны.

Представляю вам Генератор Идентификационных Карт. _На самом деле он не ограничивается таковыми - просто я их использовал именно для ID._

# Как пользоваться генератором? (Инструкция для пользователей Windows; т.к. те кто сидят на Linux и без того весьма умные)
1. Установите на свой компьютер программу Python 3.10. Поверьте, лишней никогда не бывает.
2. Запустите файл `update.bat`. Запускайте его каждый раз, когда вы по каким-то причинам перенесли папку с программой в другое место. И если вы только что его скачали - тогда да, тоже запустите.
3. Создайте YAML-файл (о том, как он должен выглядеть - можно прочитать ниже). Если что, один из шаблонов я заранее включил сюда.
4. Перетащите YAML-файл на файл под названием `run.bat` (можно - по одному! можно - сразу кучу файлов! можно - папку с этими файлами!).
5. В папке с вашим YAML-файлом только что появилась новая картинка. Профит!

# Как создать Шаблон, по которому будут собираться Карты?
Все Шаблоны хранятся в папке `configs`. Обычно, Шаблон выглядит следующим образом:
```yaml
size: [1016, 650]
order:
  - background
  - location

background:
  type: image
  path: umbrellacard/background.png
  position: [0, 0]

location:
  type: text
  font: umbrellacard/disket_regular.ttf
  text: Country, City
  size: 30
  position: [69, 300]
```

Описывать, почему YAML-файлы выглядят так, как выглядят - не стану, тут уже гуглите. Но опишу понятно для тех, кто будет работать "по образу и подобию". Единственное что запомните - отступы внутри одного и того же файла обязательно надо сохранять одинаковыми - я выбрал два пробела - значит, два пробела должны быть везде. Если вы выберете 4 пробела или одну кнопку TAB - значит отступы в файле всегда должны быть 4 пробела или одну TAB.

А теперь разберем по пунктам:
* Обязательный блок - `size`. В нем вы указываете размер финальной карточки - ширину и высоту. В моем случае создастся карточка 1016 на 650 пикселей.
* Не обязательный, но при этом удобный блок - `order`. В нем вы перечисляете порядок блоков, в котором их надо рендерить. В моем случае, сначала на карточку будет нанесен блок с названием `background`, затем блок с названием `location`, после чего карточка будет готова. Если этот блок будет отсуствовать, то система будет брать и рисовать все блоки по тому порядку, как они появляются в файле Шаблона.
* И, наконец, каждый новый блок, который не называется `size` или `order` - это то, что вы рисуете и с какими параметрами. В моем случае, будут нарисованы два блока. О блоках рисования подробнее ниже.

## Блоки Рисования
Всего существуют 3 блока Рисования. Вне зависимости от того, какой блок использован, каждый из них будет искать указанные файлы в папке `resources`. Например, если я прошу нарисовать мне `umbrellacard/background.png`, то на самом деле, Шаблон будет искать файл по пути `resources/umbrellacard/background.png` - это стоит иметь в виду.

### Блок 1: Картинка
```yaml
type: image
path: example/background.png
position: [0, 0]
transposition: []
```
Состоит из 4 элементов, **два из которых обязательны**.
1. `type` - всегда должен быть `image`, если вы, конечно, хотите чтобы этот блок рисовал картинку.
2. `path` - содержит путь к файлу с картинкой, которую надо нарисовать. Очевидно, этот элемент обязателен. В данном случае, он будет искать папку `example` внутри папки `resources`; чтобы в этой папке искать `background.png`.
3. `position` - не обязательный элемент, но скорее всего вы захотите его иметь. Указывает местоположение левого верхнего пикселя, начиная с которого будет вставлено ваше изображение. Например, если укажете `[60, 30]`, то оно будет вставлено на расстоянии 60 пикселей с левого краю и 30 пикселей с верхнего краю. Это обязательно должны быть целые числа - никаких дробей или чисел с точкой. Если вы не укажете этот элемент, он автоматически будет приравнен к `[0, 0]`
4. `transposition` - мутация вашего изображения. Здесь, через запятую, можно перечислить следующие значения: `cw`. `ccw`. `fliph`, `flipw`, `180`. `cw` повернет ваше изображение по часовой стрелке на 90 градусов, `ccw` - против часовой стрелки. `180` повернет ваше изображение на 180 градусов. `fliph` повернет ваше изображение по горизонтали, `flipw` по вертикали. Если вы не напишете этот блок, то с изображением не будет никаких изменений. Примеры того как можно использовать транспозицию: `transposition: ["cw"]` - повернет ваше изображение на 90 градусов по часовой стрелке. `transposition: ["ccw", "fliph"]` - повернет ваше изображение на 90 градусов против часовой стрелки, а затем отразит его по горизонтали.

### Блок 2: Текст
```yaml
type: text
font: example/arial.ttf
size: 32
position: [0, 0]
text: "I love you"
align: "left"
anchor: "la"
color: "#cccccc"
```
Состоит из 8 элементов, **два из которых обязательны**.
1. `type` - всегда должен быть `text`, если вы, конечно, хотите чтобы этот блок рисовал текст.
2. `font` - содержит путь к файлу с шрифтом, которым надо рисовать. Очевидно, этот элемент обязателен. Поддерживаются как `ttf` так и `otf` шрифты.
3. `size` - технически, обязательный элемент, но по факту опциональный - каким кеглем вы хотите нарисовать текст. Размер шрифта. Если не указать - по умолчанию будет равен 10.
4. `position` - не обязательный элемент, но скорее всего вы захотите его иметь. Указывает местоположение пикселя, начиная с которого будет вставлен ваш текст относительно собственного якоря. Например, если укажете `[60, 30]`, то оно будет вставлено на расстоянии 60 пикселей с левого краю и 30 пикселей с верхнего краю. Это обязательно должны быть целые числа - никаких дробей или чисел с точкой. Если вы не укажете этот элемент, он автоматически будет приравнен к `[0, 0]`
5. `text` - относительно необязательный элемент - здесь должна быть текст-рыба, которая будет появляться если вы её не сотрете. По факту не очень обязательный элемент.
6. `align` - не обязательный элемент - выравнивание шрифта. По умолчанию - `left`, то есть шрифт будет выровнян по левому краю. Можно установить в `left`, `middle` или `right`.
7. `anchor` - не обязательный, но полезный элемент. По умолчанию является `la` - то есть текст будет рисоваться начиная с левого (l) верхнего (a) угла, то есть `position` будет указывать на левый верхний пиксель вашего текста. Можно заменить `l` на `m` или `r` для смещения якоря на центр или правый край, и `a` на `t`, `m`, `s`, `b` или `d`, выставляя якорь на верхушку шрифта, его центр, базовую линию, низ шрифта или же десендер (самую нижнюю часть с кернингом и отступом). Более подробно - здесь: https://pillow.readthedocs.io/en/stable/_images/anchor_horizontal.svg . Упрощенно: Используйте `ra` для того чтобы отцентрировать шрифт справа, или `mm` чтобы отцентрировать четко посередине.
8. `color` - цвет вашего текста. Если не указать - то будет равен `#ffffff`, то есть "белый". Указывается обязательно с решеткой и цветовым HEX-кодом.

### Блок 3: Повернутый текст
```yaml
type: transposedtext
font: example/arial.ttf
size: 32
position: [0, 0]
text: "I love you"
color: "#cccccc"
transposition: []
```
Состоит из 7 элементов, **два из которых обязательны**.
1. `type` - всегда должен быть `transposedtext`, если вы, конечно, хотите чтобы этот блок рисовал текст, а затем его поворачивал.
2. `font` - содержит путь к файлу с шрифтом, которым надо рисовать. Очевидно, этот элемент обязателен. Поддерживаются как `ttf` так и `otf` шрифты.
3. `size` - технически, тоже обязательный элемент - каким кеглем вы хотите нарисовать текст. Размер шрифта. Если не указать - по умолчанию будет равен 10.
4. `position` - не обязательный элемент, но скорее всего вы захотите его иметь. Указывает местоположение пикселя, начиная с которого будет вставлен ваш текст относительно левого верхнего края. Например, если укажете `[60, 30]`, то оно будет вставлено на расстоянии 60 пикселей с левого краю и 30 пикселей с верхнего краю. Это обязательно должны быть целые числа - никаких дробей или чисел с точкой. Если вы не укажете этот элемент, он автоматически будет приравнен к `[0, 0]`
5. `text` - относительно необязательный элемент - здесь должна быть текст-рыба, которая будет появляться если вы её не сотрете. По факту не очень обязательный элемент.
6. `color` - цвет вашего текста. Если не указать - то будет равен `#ffffff`, то есть "белый". Указывается обязательно с решеткой и цветовым HEX-кодом.
7. `transposition` - мутация вашего текста. Здесь, через запятую, можно перечислить следующие значения: `cw`. `ccw`. `fliph`, `flipw`, `180`. `cw` повернет ваш текст по часовой стрелке на 90 градусов, `ccw` - против часовой стрелки. `180` повернет ваш текст на 180 градусов. `fliph` повернет ваш текст по горизонтали, `flipw` по вертикали. Если вы не напишете этот блок, то с текстом не будет никаких изменений (что глупо, так как transposedtext все-таки предполагает что вы его выбрали именно потому, что текст-то надо вращать). Примеры того как можно использовать транспозицию: `transposition: ["cw"]` - повернет ваш текст на 90 градусов по часовой стрелке. `transposition: ["ccw", "fliph"]` - повернет ваш текст на 90 градусов против часовой стрелки, а затем повернет его по горизонтали.

Можно заметить, что здесь нету выравнивания или якоря - потому что функционал поворота текста, к сожалению, ломает многие вещи.

# Как создать Карту из Шаблона?
Карта - вещь на порядок более простая. Предположим, ваш шаблон называется `shablon.yaml`, и там вы создали 5 блоков - `avatar` - картинка 350х350 с аватаркой, `name` - текстовое имя, `id` - текст с 8 цифрами, `color` - картинка с любимым цветом (50х50 пикселей), и `symbol` - картинка с любимым животным (50х50 пикселей).
```yaml
config: shablon
substitutes:
  avatar: "avatars350/vasyapupkin.png"
  name: "Василий Пупкин"
  id: "13370001"
  color: "shablon/color/red.png"
  symbol: "shablon/symbol/circle.png"
```

Как можно заметить, здесь всего два блока.
1. `config` - как называется ваш шаблон, который находится в папке `configs`. У нас он называется `shablon.yaml`, значит, и здесь он будет `shablon`.
2. `substitutes` - каким образом заменять те или иные детали на шаблоне. Здесь, я заменил аватар на тот, который находится по пути `resources/avatars350/vasyapupkin.png`, имя на карточке на `Василий Пупкин`, и остальные буквы и картинки соответственно. Вам не обязательно указывать все блоки - те, которые не будут указаны (например, `background` - не будут заменяться).

Вы так же можете заменить более сложно - например, если вы хотите чтобы ID на карточке был другого цвета, тогда вы можете переопределить часть блока. Пример:
```yaml
config: shablon
substitutes:
  avatar: "avatars350/vasyapupkin.png"
  name: "Василий Пупкин"
  id:
    text: "13370001"
    color: "#ff0000"
  color: "shablon/color/red.png"
  symbol:
    path: "shablon/symbol/face.png"
    transposition: ["180"]
```
В этом примере я не только заменил текст, который будет писаться на месте id, но и его цвет на красный; а так же повернул символ на 180 градусов.